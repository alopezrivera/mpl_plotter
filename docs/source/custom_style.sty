\RequirePackage{tikz}                               % Vector graphics
\RequirePackage{fancyhdr}                           % Page headers and footers

\RequirePackage{amsmath,amsfonts,amssymb,amsthm}    % Math symbols
\RequirePackage{fontawesome5}		                % Cool icons

\RequirePackage{datetime}                           % Date formatting

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                            %
%          Project           %
%                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\project{MPL Plotter}

\def\institution{%
\textbf{Antonio LÃ³pez Rivera}\\%
\href{https://github.com/alopezrivera}{\color{white}\faGithub}\\%
\href{mailto:pythonmplplotter@gmail.com}{\color{white}\faEnvelopeOpen[regular]}%
}

\def\styleInst{\fontsize{8}{8}\linespread{1.4}\selectfont}

\definecolor{colorHeader}{HTML}{000000}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                            %
%      General Settings      %
%                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagestyle{fancy}

\newdateformat{monthyeardate}{%
  \monthname[\THEMONTH] \THEYEAR}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                            %
%           Title            %
%                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\maketitle}{
    \clearpage\thispagestyle{empty}     % Remove page numbering

    \begin{titlepage}
    \makeatletter                       % Retrieve title & other macros
    \centering

    \vspace*{6cm}
    {\fontsize{30}{30}\bfseries\selectfont \@title}

    \vspace{2cm}
    {\fontsize{15}{15}\bfseries\selectfont \@author}

    \vspace*{0.5cm}
    {\fontsize{12}{12}\selectfont\monthyeardate\today}

    \begin{figure}[!b]
        \centering
        \includegraphics[height=3\logoHeight]{logo.png}
    \end{figure}

    \makeatother
    \end{titlepage} % ---------------------------------- Title Page End

    \clearpage
    \pagenumbering{roman}

    \tableofcontents            % TOC
    % \listoffigures              % LOF
    % \listoftables               % LOT

    \clearpage
    \pagenumbering{arabic}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                            %
%        DFKI Banner         %
%                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newlength   \bannerHeight
\setlength   \bannerHeight      {2.5cm}

\newlength   \boxHeight
\newlength   \logoWidth
\newlength   \logoHeight
\newlength   \institutionHeight

\setlength   \boxHeight         {\bannerHeight}
\setlength   \logoHeight        {\bannerHeight}
\settowidth  \logoWidth         {\includegraphics[height=2cm]{logo.png}}

\newcommand\bannercontent[1]{%
    \if\relax\detokenize{#1}\relax%
        \institution{}%
    \else%
        #1%
    \fi%
}

\newcommand{\banner}[1]{
    \settoheight \institutionHeight {\vbox{\styleInst\bannercontent{#1}}}
    \begin{tikzpicture}[remember picture,overlay]
    \tikzstyle{every node}=[font=\styleInst]
    \node [anchor=north west, 
           inner sep=0] at (current page.north west) {\color{colorHeader}\rule{\paperwidth}{\boxHeight}};   
    \node [anchor=north west, 
        inner sep=0,
        xshift=\dimexpr -0.5\boxHeight + 0.5\logoHeight,
        yshift=\dimexpr -0.5\boxHeight + 0.5\logoHeight] (logo) at (current page.north west) {\includegraphics[height=\logoHeight]{logo.png}};
    \node [anchor=north west, 
        inner sep=0] (separator) at (logo.north east) {\color{white}\rule{0.05cm}{\boxHeight}};
    \node [align=left,
        text=white,
        anchor=north west, 
        inner sep=0,
        xshift=\dimexpr 0.5\boxHeight - 0.5\institutionHeight,
        yshift=\dimexpr -0.5\boxHeight + 0.5\institutionHeight] at (separator.north east) {\bannercontent{#1}};
    \end{tikzpicture}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                            %
%    Headers and Footers     %
%                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Normal page
\fancypagestyle{normal}{
    \fancyhf{}
    % Tune lines
    \renewcommand{\headrulewidth}{0.0pt}
    \renewcommand{\footrulewidth}{0.4pt}
    % Header
    \fancyhead[L]{\banner{}}
    \fancyhead[LE, LO]{\banner{}}
    % Footer
    \makeatletter
    \fancyfoot[R]{\py@HeaderFamily\thepage}
    \fancyfoot[LE, RO]{\py@HeaderFamily\thepage}
    \fancyfoot[L]{\py@HeaderFamily\@title}
    \fancyfoot[LO, RE]{\py@HeaderFamily\@title}
    \makeatother
}
% Chapter page
\fancypagestyle{plain}{
    \fancyhf{}
    % Tune lines
    \renewcommand{\headrulewidth}{0.0pt}
    \renewcommand{\footrulewidth}{0.4pt}
    % Header
    \fancyhead[L]{\banner{\fontsize{20}{20}\selectfont\textbf{\project} \version}}
    \fancyhead[LE, LO]{\banner{\fontsize{20}{20}\selectfont\textbf{\project} \version}}
    % Footer
    \makeatletter
    \fancyfoot[R]{\py@HeaderFamily\thepage}
    \fancyfoot[LE, RO]{\py@HeaderFamily\thepage}
    \fancyfoot[L]{\py@HeaderFamily\@title}
    \fancyfoot[LO, RE]{\py@HeaderFamily\@title}
    \makeatother
}